---
title: momentjs ä½¿ç”¨ç¬”è®°
date: 2020.02.29
categories:
  - å¼€å‘
tags:
  - momentjs
  - æ—¶åŒº
  - dayjs
---

# momentjs ä½¿ç”¨ç¬”è®°

## è§£æ

è§£æå­—ç¬¦ä¸²`moment(string)`ï¼Œé»˜è®¤ä½¿ç”¨[ISO 8601](https://zh.wikipedia.org/wiki/ISO_8601)æ ¼å¼è§£æ

å¦‚æœä¸èƒ½è¯†åˆ«ï¼Œé™çº§ä¸º`new Date(string)`è¯†åˆ«ï¼Œ

<!-- more -->

### æ³¨æ„æ—¶åŒº

**æ³¨æ„**ï¼š js new Date()é‡Œé‡Œé»˜è®¤ä½¿ç”¨`GMT`ä½œä¸ºæ ‡å‡†æ—¶é—´ï¼Œå¦‚æœä¼ å…¥å…¶å®ƒæ ‡å‡†æ—¶é—´å…³é”®å­—ï¼Œä¼šè¯†åˆ«ä¸å‡†ç¡®

ä¾‹å¦‚`CST`ï¼Œåœ¨ä¸­å›½å°±ä¼š**å¤šå‡º14ä¸ªå°æ—¶**ï¼Œ

```js
new Date('Thu Oct 24 10:45:31 CST 2019') // Fri Oct 25 2019 00:45:31 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
```

å› ä¸ºå¸¦æœ‰CSTå…³é”®å­—åï¼Œä¼šé»˜è®¤åŒ—ç¾æ—¶åŒº(-6)ï¼Œæ˜¾ç¤ºå†è½¬æ¢ä¸ºæœ¬åœ°çš„æ—¶åŒº(ä¸­å›½+8)ï¼Œå°±ä¼šå¤šå‡º14ä¸ªå°æ—¶

>CST
>
> ç¾å›½ä¸­éƒ¨æ—¶é—´ï¼šCentral Standard Time (USA) UT-6:00
>
> æ¾³å¤§åˆ©äºšä¸­éƒ¨æ—¶é—´ï¼šCentral Standard Time (Australia) UT+9:30
>
> ä¸­å›½æ ‡å‡†æ—¶é—´ï¼šChina Standard Time UT+8:00
>
> å¤å·´æ ‡å‡†æ—¶é—´ï¼šCuba Standard Time UT-4:00

è§£å†³åŠæ³•ï¼Œå¯ä»¥åŠ 14ä¸ªå°æ—¶ï¼Œæˆ–è€…åˆ é™¤å…³é”®å­—

```js
new Date('Thu Oct 24 10:45:31 CST 2019'.replace('CST', '')) // Thu Oct 24 2019 10:45:31 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)
```

æ›´å…·æµè§ˆå™¨å…¼å®¹æ€§ä¸åŒï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ³•

### å½“å‰æ—¶é—´

å¦‚æœmomentæ²¡æœ‰å‚æ•°æ—¶`moment()`ï¼Œä¼šè¿”å›å½“å‰æ—¶é—´çš„å®ä¾‹

åŸºæœ¬ç­‰åŒäº`moment(new Date())`å’Œ`moment(undefined)`ï¼Œä½†`moment(null)`æ— æ³•è§£æ

### å·²çŸ¥æ—¶é—´æ ¼å¼

å¦‚æœå·²çŸ¥äº†new Date()æ— æ³•è¯†åˆ«çš„æ—¶é—´æ ¼å¼ï¼Œå¯ä»¥ä¼ å…¥momentç¬¬äºŒä¸ªå‚æ•°ï¼Œæ¥æ­£ç¡®çš„è§£ææ—¶é—´å‚æ•°

```js
moment('2012-12-13 14:15:16', 'YYYY-MM-DD HH:mm:ss')
```

è¿™é‡Œå…³é”®å­—å«ä¹‰å¦‚ä¸‹ï¼ŒåŒºåˆ†å¤§å°å†™

è¾“å…¥ | ç¤ºä¾‹ | 	æè¿° 
---- | ----  | ---- 
YYYY | 2014 |	4 æˆ– 2 ä½æ•°å­—çš„å¹´ä»½
YY | 14 |	2 ä½æ•°å­—çš„å¹´ä»½
M | 1 - 12 |	æœˆä»½
MM | 01 - 12 |	æœˆä»½,ä¸¤ä½æ•°
D | 1-31 |	ä¸€ä¸ªæœˆä¸­çš„æŸå¤©
DD | 01-31 | ä¸€ä¸ªçš„æŸå¤©ï¼Œä¸¤ä½æ•°
H | 0-23 | å°æ—¶
HH | 00-23 | å°æ—¶ï¼Œä¸¤ä½æ•°
h | 1-12 | å°æ—¶ï¼Œ12å°æ—¶åˆ¶
hh | 01-12 | å°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼Œ2ä½æ•°å­—
m | 0-59 | åˆ†é’Ÿ
mm | 00-59 | åˆ†é’Ÿï¼Œä¸¤ä½æ•°
s | 0-59 | ç§’
ss | 00-59 | ç§’ï¼Œä¸¤ä½æ•°
S | 0-9 | ç™¾æ¯«ç§’ï¼Œ1ä½æ•°
SS | 00-99 | åæ¯«ç§’ï¼Œä¸¤ä½æ•°
SSS | 000-999 | æ¯«ç§’ï¼Œä¸‰ä½æ•°
Z | -05ï¼š00 | UTC åç§»é‡
ZZ | -0500 | UTC åç§»é‡ï¼Œä¸¤ä½
A | ä¸Šåˆä¸‹åˆ | åæˆ–äº‹å‰å­å¥ï¼Œå¤§å†™
a | ä¸Šåˆä¸‹åˆ | åæˆ–äº‹å‰å­å¥ï¼Œå°å†™

## æ˜¾ç¤º

### format

æ ¹æ®å‚æ•°æ˜¾ç¤ºæ ¼å¼åŒ–åçš„**å­—ç¬¦ä¸²**ï¼Œå‚æ•°äº§è€ƒä¸Šé¢çš„è¡¨æ ¼

ä¸ä¼ å‚æ—¶ï¼Œæ˜¾ç¤ºä¸º`ISO_8601`æ ¼å¼ï¼Œæ— æ¯«ç§’

```js
moment('2012-12-13').format('YYYY-MM-DD HH:mm:ss') // 2012-12-13 00:00:00
moment('2012-12-13').format() // 2012-12-13T00:00:00+08:00"
```

### diff

å¯¹æ¯”å·®å€¼

```js
moment('2012-12-13').diff(moment('2012-12-12')) // -86400000
moment('2012-12-11').diff(moment('2012-12-12')) // 86400000
moment('2012-11-11').diff(moment('2010-12-12'), 'Y') // 1
moment('2012-11-11').diff(moment('2010-12-12'), 'Y', true) // 1.913978494623656
```

ç¬¬äºŒä¸ªå‚æ•°å¦‚ä¸‹

é”® | ç®€å†™
---- | ----
years | y
months | M
weeks | w
days | d
hours | h
minutes | m
seconds | s
milliseconds | ms

### valueOf

æ˜¾ç¤ºæ¯«ç§’**æ•°å€¼**

```js
moment('2012-12-13').valueOf() //1355328000000
```

### unix

æ˜¾ç¤ºç§’**æ•°å€¼**

```js
moment('2012-12-13').unix() // 1355328000
```

### daysInMonth

å½“æœˆå¤šå°‘å¤©

```js
moment('2012-02').daysInMonth() // 29
moment('2011-02').daysInMonth() // 28
```

## è®¾ç½®

```js
moment('2012-12-12').format('YYYY-MM-DD HH:mm:ss') // "2012-12-12 00:00:00"
moment('2012-12-12').second(2).format('YYYY-MM-DD HH:mm:ss') // ç§’ "2012-12-12 00:00:02"
moment('2012-12-12').minute(2).format('YYYY-MM-DD HH:mm:ss') // åˆ†é’Ÿ "2012-12-12 00:02:00"
moment('2012-12-12').hour(2).format('YYYY-MM-DD HH:mm:ss') // å°æ—¶ "2012-12-12 02:00:00"
moment('2012-12-12').date(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰æœˆä¸­çš„å¤© "2012-12-02 00:00:00"
moment('2012-12-12').day(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰æ˜ŸæœŸä¸­çš„å¤© "2012-12-11 00:00:00"
moment('2012-12-12').weekday(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰æ˜ŸæœŸçš„æ˜ŸæœŸå‡  "2012-12-11 00:00:00"
moment('2012-12-12').dayOfYear(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰å¹´çš„ç¬¬å‡ å¤© "2012-01-02 00:00:00"
moment('2012-12-12').week(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰å¹´çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸ "2012-01-11 00:00:00"
moment('2012-12-12').month(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰å¹´çš„ç¬¬å‡ æœˆï¼Œ0æ˜¯ç¬¬ä¸€ä¸ªæœˆï¼Œ"2012-03-12 00:00:00"
moment('2012-12-12').quarter(2).format('YYYY-MM-DD HH:mm:ss') // å½“å‰å¹´çš„ç¬¬å‡ å­£åº¦ "2012-06-12 00:00:00"
moment('2012-12-12').year(2).format('YYYY-MM-DD HH:mm:ss') // å¹´ "0002-12-12 00:00:00"
```

è¿˜å¯ä»¥
```js
moment('2012-12-12').set('date', 2)
moment('2012-12-12').set('hour', 2).format('YYYY-MM-DD HH:mm:ss')
```

## è·å–

```js
moment('2012-12-12').get('year');
moment('2012-12-12').get('month');  // 0 è‡³ 11
moment('2012-12-12').get('date');
moment('2012-12-12').get('hour');
moment('2012-12-12').get('minute');
moment('2012-12-12').get('second');
moment('2012-12-12').get('millisecond');
```

## æ“ä½œ

```js
moment('2012-12-12').add(7, 'days').subtract(1, 'months').format('YYYY-MM-DD HH:mm:ss') // "2012-11-19 00:00:00"
```

momentå¯¹è±¡æ˜¯å¯å˜çš„ï¼Œæ“ä½œååŸæœ¬å¯¹è±¡å†…çš„å€¼å°±ä¼šå˜åŒ–ï¼Œä¾‹å¦‚æˆ‘ä»¬è¦æ˜¾ç¤º`å‰å3å¤©çš„å€¼`

```js
const cur = moment('2012-12-12')

// é”™è¯¯
cur.subtract(3, 'days').format('YYYY-MM-DD HH:mm:ss') // "2012-12-09 00:00:00"
cur.add(3, 'days').format('YYYY-MM-DD HH:mm:ss') // "2012-12-12 00:00:00"

// æ­£ç¡®ï¼Œéœ€è¦å…‹éš†å‡ºæ¥å†ä½¿ç”¨
moment(cur).subtract(3, 'days').format('YYYY-MM-DD HH:mm:ss') // "2012-12-09 00:00:00"
moment(cur).add(3, 'days').format('YYYY-MM-DD HH:mm:ss') // "2012-12-15 00:00:00"
```

### å¼€å§‹ç»“æŸæ—¶é—´

```js
// å¼€å§‹
moment().startOf('year');    // è®¾ç½®ä¸ºä»Šå¹´ä¸€æœˆ1æ—¥ä¸Šåˆ 12:00
moment().startOf('month');   // è®¾ç½®ä¸ºæœ¬æœˆ1æ—¥ä¸Šåˆ 12:00
moment().startOf('quarter');  // è®¾ç½®ä¸ºå½“å‰å­£åº¦çš„å¼€å§‹ï¼Œå³æ¯æœˆçš„ç¬¬ä¸€å¤©ä¸Šåˆ 12:00
moment().startOf('week');    // è®¾ç½®ä¸ºæœ¬å‘¨çš„ç¬¬ä¸€å¤©ä¸Šåˆ 12:00
moment().startOf('isoWeek'); // æ ¹æ® ISO 8601 è®¾ç½®ä¸ºæœ¬å‘¨çš„ç¬¬ä¸€å¤©ä¸Šåˆ 12:00
moment().startOf('day');     // è®¾ç½®ä¸ºä»Šå¤©ä¸Šåˆ 12:00
moment().startOf('date');     // è®¾ç½®ä¸ºä»Šå¤©ä¸Šåˆ 12:00
moment().startOf('hour');    // è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œä½†æ˜¯ 0 åˆ†é’Ÿã€0 ç§’é’Ÿã€0 æ¯«ç§’
moment().startOf('minute');  // è®¾ç½®ä¸ºå½“å‰æ—¶é—´ï¼Œä½†æ˜¯ 0 ç§’é’Ÿã€0 æ¯«ç§’
moment().startOf('second');  // ä¸ moment().milliseconds(0); ç›¸åŒ

// ç»“æŸ
moment().endOf("year"); // å°† moment è®¾ç½®ä¸ºä»Šå¹´çš„ 12 æœˆ 31 æ—¥ 23:59:59.999
```

**æ³¨æ„**ï¼šå¼€å§‹æ—¶é—´å’Œç»“æŸï¼Œå°æ—¶ä»¥ä¸Šï¼Œå‡ä¸º`12:00`ï¼Œç»“æŸæ—¶é—´å‡ä¸º`23:59:59:999`

## æŸ¥è¯¢

```js
// å°äº
moment('2010-10-20').isBefore('2010-10-21'); // true

// ç›¸ç­‰
moment('2010-10-20').isSame('2010-10-20'); // true

// å¤§äº
moment('2010-10-20').isAfter('2010-10-19'); // true

// èŒƒå›´å†…
moment('2010-10-20').isBetween('2010-10-19', '2010-10-25'); // true

// æ˜¯å¦æ˜¯momentjså¯¹è±¡
moment.isMoment() // false
moment.isMoment(new Date()) // false
moment.isMoment(moment()) // true

// æ˜¯å¦æ˜¯new Date() åŸç”Ÿå¯¹è±¡
moment.isDate(); // false
moment.isDate(new Date()); // true
moment.isDate(moment()); // false
```

å¯ç”¨[dayjs](https://github.com/iamkun/dayjs)æ›¿ä»£

- ğŸ•’ å’Œ Moment.js ç›¸åŒçš„ API å’Œç”¨æ³•
- ğŸ’ª ä¸å¯å˜æ•°æ® (Immutable)
- ğŸ”¥ æ”¯æŒé“¾å¼æ“ä½œ (Chainable)
- ğŸŒ å›½é™…åŒ– I18n
- ğŸ“¦ ä»… 2kb å¤§å°çš„å¾®å‹åº“
- ğŸ‘« å…¨æµè§ˆå™¨å…¼å®¹